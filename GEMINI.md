# File Magnet - Project Context

## Project Overview

**File Magnet** is a web-based file manager application built with **Bun**, **React 19**, and **Tailwind CSS v4**. It features a modern UI (likely using shadcn/ui components) and provides core file management capabilities like uploading, creating folders, moving, and deleting files.

### Tech Stack

*   **Runtime & Server:** [Bun](https://bun.com) (v1.x) - Used for both the HTTP server and the build toolchain.
*   **Frontend Framework:** React 19.
*   **Styling:** Tailwind CSS v4 (configured via `bun-plugin-tailwind`).
*   **UI Components:** Radix UI primitives, Lucide React icons.
*   **Data Storage:** Local filesystem storage in the `data/` directory.
*   **Other Libraries:** `dexie` (IndexedDB), `epubjs` (Epub reading), `prism-react-renderer` (Syntax highlighting).

### Architecture

*   **Monolithic Structure:** Both backend API and frontend code reside in `src/`.
*   **Server (`src/index.ts`):** Uses `Bun.serve()` to handle API routes (`/api/files`, `/api/folders`, etc.) and serve the `index.html` entry point.
*   **Frontend Entry:** `src/index.html` imports `src/frontend.tsx`, which mounts the React application.
*   **File Operations (`src/utils/files.ts`):** Abstraction layer for filesystem operations. It maps the `data/` directory to the application's virtual file tree.
*   **Building:** `build.ts` is a custom build script that uses `Bun.build()` to bundle the application for production.

## Building and Running

### Prerequisites

*   **Bun:** Ensure Bun is installed (`curl -fsSL https://bun.sh/install | bash`).

### Key Commands

| Command | Description |
| :--- | :--- |
| `bun install` | Install dependencies. |
| `bun dev` | Start the development server with hot reloading (`bun --hot src/index.ts`). |
| `bun start` | Start the production server (`NODE_ENV=production bun src/index.ts`). |
| `bun build` | Build the application for production into the `dist/` directory. |

### Configuration

*   **Port:** The server defaults to port `1945` (hardcoded in `src/index.ts`).
*   **Data Directory:** Files are stored in `data/`, located two levels up from `src/utils/files.ts`.
*   **TypeScript:** Configured in `tsconfig.json` with `@/*` aliases mapping to `./src/*`.

## Development Conventions

*   **Runtime:** Use `bun` for all scripts and command-line operations (install, run, test).
*   **Filesystem APIs:** Prefer `Bun.file()` and `Bun.write()` over `node:fs` where possible. However, `node:fs/promises` is used for directory listing (`readdir`, `mkdir`) as needed.
*   **Component Structure:** UI components are located in `src/components/`, with reusable UI primitives in `src/components/ui/`.
*   **Imports:** Use the `@/` alias to import from `src/`.
*   **Styling:** Use Tailwind utility classes.
*   **HTML Entry:** The application uses the "HTML as entry point" pattern supported by Bun, rather than a separate bundler config like Vite.

## Directory Structure

*   `src/index.ts`: Main server entry point.
*   `src/index.html`: Frontend HTML template.
*   `src/frontend.tsx`: React entry point.
*   `src/components/`: React components.
*   `src/hooks/`: Custom React hooks (e.g., `useFiles.ts`).
*   `src/lib/`: Utility libraries.
*   `src/utils/`: Backend utilities (e.g., `files.ts` for FS operations).
*   `data/`: Storage for user files (created automatically).
*   `dist/`: Production build output (generated by `bun build`).
